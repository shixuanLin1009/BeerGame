# 📦 BeerGame 製造商最佳化系統模擬

本模擬程式模擬一個 BeerGame 中的製造商(Manufator) **缺貨處理** 與 **下訂策略**，透過輸入預測量、實際出貨與缺貨情況，計算最適訂單量，並考慮生產提前期與平滑訂單變化，以最小化缺貨成本與存貨成本。

## ✅ 模擬目標

- 根據預測與實際需求調整訂單數
- 降低總成本（含缺貨成本與存貨成本）
- 減少波動（平滑訂單量）
- 模擬 20 週內策略成效

---

## 🔧 模型參數

| 參數名稱        | 說明                     | 預設值 |
| --------------- | ------------------------ | ------ |
| `stock_price`   | 每單位存貨成本           | 5      |
| `backlog_price` | 每單位缺貨成本           | 25     |
| `leadtime`      | 生產提前期（週數）       | 2      |
| `a`             | 訂單平滑係數 (0 < α < 1) | 0.8    |

---

## 🧠 策略說明

### 🔹 基本邏輯

```python
target_stock = forecast * leadtime + backlog (if any)
order = target_stock - (現有存貨 + 前兩期生產 + 本期進貨 - 當期需求 + backlog - 上期backlog)
```

### 🔹 平滑訂單策略（Order Smoothing）

透過以下公式平滑波動大的訂單量，避免因短期需求波動導致庫存劇烈變化：

$$
Order_t = \alpha × Order_{\text{new}} + (1 - \alpha) × Order_{\text{prev}}
$$

其中：

- α 越小，代表更保守，訂單變動更緩和
- α 越大，代表更積極，反應需求變動更快速

---

## 🧪 使用流程

1. 執行模擬程式
2. 每週輸入以下三項數據：
   - **預測量**（forecast）
   - **實際出貨量**（Outgoing）
   - **缺貨量**（backlog）
3. 程式輸出：
   - 當期進貨量、當期存貨、計算需求量、訂單量與訂單平滑後結果

---

## 📈 模擬目標效果（根據策略）

- 策略設計以「**最小化總成本**」為目標
- 考量實際需求＋預測落差，動態調整目標存貨
- 搭配平滑訂單機制，避免過度反應，穩定供應鏈操作

---

## 🧩 模擬變數說明

| 變數名稱       | 意義                             |
| -------------- | -------------------------------- |
| `p_1`, `p_2`   | 過去兩期的訂單量                 |
| `incoming`     | 本期到貨量（根據 leadtime 滾動） |
| `backlog`      | 當期缺貨數量                     |
| `stock`        | 當期庫存                         |
| `last_demand`  | 上期需求量                       |
| `last_backlog` | 上期缺貨                         |
| `last_order`   | 上期訂單數（用於平滑）           |

---

## 📌 延伸建議

- 將歷史預測與實際 demand 差距納入調整權重
- 加入需求預測模型（如 MA, ARIMA）提升前瞻性
- 模擬不同行業的 `stock_price/backlog_price` 比例，探索策略調整

---

有需要我可以幫你補上 `成本統計與可視化` 的版本，或將這段改寫為 Python 類別方便擴充！想加 Excel 匯出也 OK ～你覺得怎麼樣？
